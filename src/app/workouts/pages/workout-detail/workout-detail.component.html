<div *ngIf="workout$ | async as currentWorkout" class="workout-detail">
  <ng-container *ngIf="currentWorkout.startedDate">
    <div class="workout-detail-header">
      <button (click)="complete()">Finish</button>
      <button class="secondary" (click)="cancel()">Cancel</button>
    </div>
  </ng-container>

  <ng-container *ngIf="!currentWorkout.startedDate">
    <div class="workout-detail-header">
      <button (click)="start()">Start</button>
    </div>
  </ng-container>

  <div class="workout-detail-title">
    <h2>{{currentWorkout.title}}</h2>
  </div>

  <div class="workout-detail-timer" #TimerRef>
    <Timer
      [startDate]="currentWorkout.startedDate"
      (timeChanged)="handleWorkoutTimerUpdate($event)">
    </Timer>
  </div>

  <div class="workout-detail-scrolling-timer" #ScrollingTimerRef>
    <Timer></Timer>
  </div>

  <div #TimerAnchor class="workout-detail-timer-wrapper"></div>

  <div class="workout-detail-exercises">
    <div *ngFor="let e of currentWorkout.exercises; let i = index;" class="workout-detail-exercise">
      <ExerciseCard
        [exercise]="e"
        [exerciseIndex]="i">
      </ExerciseCard>
    </div>
  </div>

  <div class="workout-detail-add-exercise">
    <button class="pill-button--blue" (click)="openExercisePicker()">Add Exercise</button>
  </div>
</div>

<app-exercise-picker
  [isOpen]="isChoosingExercise"
  (closed)="isChoosingExercise = false"
  (selected)="addExercise($event)">
</app-exercise-picker>
